# Декоратор —  структурный паттерн.

Декоратор позволяет динамически добавлять объектам новую функциональность, путем оборачивая их в «обёртки».Такие обёртки помогают расширять функциональность объекта не изменяя сам объект.

Декоратор расширяет функциональность динамически, без необходимости описывать каждый класс-наследник отдельно.

 
## Пример из жизни
![image](https://radioprog.ru/uploads/media/articles/0001/06/f970ffcd6fa8ec30acf7f7b2b804e7a0ac4f016c.png)

Одежду можно надевать слоями, получая комбинированный эффект

Любая одежда – это аналог Декоратора. 
Применяя Декоратор, вы не меняете первоначальный класс и не создаёте дочерних классов. Так и с одеждой – надевая свитер, вы не перестаёте быть собой, но получаете новое свойство – защиту от холода. Вы можете пойти дальше и надеть сверху ещё один декоратор – плащ, чтобы защититься и от дождя.

## Когда применять
- Когда вам нужно добавлять обязанности объектам на лету, незаметно для кода, который их использует.
- Объекты помещают в обёртки, имеющие дополнительные поведения. 
- Когда нельзя расширить обязанности объекта с помощью наследования.

## Особенности
- Обёртки и сами объекты имеют одинаковый интерфейс, поэтому клиентам без разницы, с чем работать – с обычным объектом данных или с обёрнутым.
- Сама философия этого шаблона повторяет принцип открытости-закрытости — мы не меняем базовый класс, а добавляем сущности, которые содержат в себе изменения бизнес-требований.

## Преимущества и недостатки

**Преимущества**
-   Большая гибкость, чем у наследования.
-   Позволяет добавлять обязанности на лету.
-   Можно добавлять несколько новых обязанностей сразу.
-   Позволяет иметь несколько мелких объектов вместо одного объекта на все случаи жизни.

**Недостатки**
-   Трудно конфигурировать многократно обёрнутые объекты.
-   Обилие крошечных классов.

## Отличие от Proxy
Разница между декоратором и прокси в том, что прокси всегда предоставляет тот же интерфейс, в то время как декоратор может предоставлять расширенный интерфейс.

## Отношения с другими паттернами
- Адаптер меняет интерфейс существующего объекта. Декоратор улучшает другой объект без изменения его интерфейса. Причём Декоратор поддерживает рекурсивную вложенность, чего не скажешь об Адаптере.

- **Адаптер** предоставляет классу альтернативный интерфейс. **Декоратор** предоставляет расширенный интерфейс. **Заместитель** предоставляет тот же интерфейс.

- **Цепочка обязанностей** и **Декоратор** имеют очень похожие структуры. Оба паттерна базируются на принципе рекурсивного выполнения операции через серию связанных объектов. Но есть и несколько важных отличий.

- Обработчики в **Цепочке обязанностей** могут выполнять произвольные действия, независимые друг от друга, а также в любой момент прерывать дальнейшую передачу по цепочке. С другой стороны **Декораторы** расширяют какое-то определённое действие, не ломая интерфейс базовой операции и не прерывая выполнение остальных декораторов.

- **Компоновщик** и **Декоратор** имеют похожие структуры классов из-за того, что оба построены на рекурсивной вложенности. Она позволяет связать в одну структуру бесконечное количество объектов.

- **Декоратор** оборачивает только один объект, а узел **Компоновщика** может иметь много детей. **Декоратор** добавляет вложенному объекту новую функциональность, а **Компоновщик** не добавляет ничего нового, но «суммирует» результаты всех своих детей.

- Но они могут и сотрудничать: **Компоновщик** может использовать **Декоратор**, чтобы переопределить функции отдельных частей дерева компонентов.

- Архитектура, построенная на **Компоновщиках** и **Декораторах**, часто может быть улучшена за счёт внедрения **Прототипа**. Он позволяет клонировать сложные структуры объектов, а не собирать их заново.

- **Стратегия** меняет поведение объекта «изнутри», а **Декоратор** изменяет его «снаружи».

- **Декоратор** и **Заместитель** имеют схожие структуры, но разные назначения. Они похожи тем, что оба построены на принципе композиции и делегируют работу другим объектам. Паттерны отличаются тем, что **Заместитель** сам управляет жизнью сервисного объекта, а обёртывание **Декораторов** контролируется клиентом.

